<div>
  <div class="breadcrumbs-wrapper">
    {% render 'breadcrumbs' %}
  </div>

  {% capture slot_gallery %}
    {% content_for 'block', type: '_section-flex-pdp-media-gallery', id: 'section-flex-pdp-media-gallery' %}
  {% endcapture %}

  {% capture slot_details %}
    {% content_for 'blocks' %}
  {% endcapture %}

  {%- render 'section.flex-pdp', slot_gallery: slot_gallery, slot_details: slot_details -%}
</div>

{% javascript %}
  document.addEventListener('product-form:cart:navigate', (event) => {
    window.PXUTheme.theme_settings.cart_action_type === 'ajax' && event.preventDefault();
  });

  document.addEventListener('product-form:submit:success', () => {
    window.PXUTheme.cartDrawer.loadDrawer(true);
  });

  document.addEventListener('product-form:message:success', (event) => {
    event.preventDefault();
  });

  document.addEventListener('product-form:cart:update', (event) => {
    const { item_count } = event.detail.cart;
    window.PXUTheme.cartDrawer.updateCartCount(item_count);
  });
{% endjavascript %}

{% schema %}
{
  "name": "t:flex_pdp.section.high_variant.name",
  "settings": [
    {
      "type": "select",
      "id": "padding",
      "label": "t:flex_pdp.section.high_variant.settings.padding.label",
      "default": "both",
      "options": [
        { "value": "none", "label": "t:flex_pdp.section.high_variant.settings.padding.options.none.label" },
        { "value": "top", "label": "t:flex_pdp.section.high_variant.settings.padding.options.top.label" },
        { "value": "bottom", "label": "t:flex_pdp.section.high_variant.settings.padding.options.bottom.label" },
        { "value": "both", "label": "t:flex_pdp.section.high_variant.settings.padding.options.both.label" }
      ]
    }
  ],
  "blocks": [
    {"type": "@app"},
    {"type": "@theme"},
    {"type": "_section-flex-pdp-buy-buttons"},
    {"type": "_section-flex-pdp-description"},
    {"type": "_section-flex-pdp-divider"},
    {"type": "_section-flex-pdp-policies"},
    {"type": "_section-flex-pdp-price"},
    {"type": "_section-flex-pdp-quantity-picker"},
    {"type": "_section-flex-pdp-sku"},
    {"type": "_section-flex-pdp-title"},
    {"type": "_section-flex-pdp-variant-picker"},
    {"type": "_section-flex-pdp-vendor"},
    {"type": "_section-flex-pdp-pick-up"},
    {"type": "_section-flex-pdp-installments"},
    {"type": "_section-flex-pdp-inventory"}
  ],
  "presets": [
    {
      "name": "t:flex_pdp.section.high_variant.name",
      "blocks": [
        {"type": "_section-flex-pdp-title"},
        {"type": "_section-flex-pdp-vendor"},
        {"type": "_section-flex-pdp-price"},
        {"type": "_section-flex-pdp-installments"},
        {"type": "_section-flex-pdp-divider"},
        {"type": "_section-flex-pdp-variant-picker"},
        {"type": "_section-flex-pdp-quantity-picker"},
        {"type": "_section-flex-pdp-buy-buttons"},
        {"type": "_section-flex-pdp-pick-up"},
        {"type": "_section-flex-pdp-description"}
      ]
    }
  ]
}
{% endschema %}